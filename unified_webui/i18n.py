"""Unified internationalization support for MysterySeek platform."""

import logging
from typing import Dict, Any

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s | %(levelname)-8s | %(name)s | %(message)s',
    datefmt='%Y-%m-%d %H:%M:%S'
)
logger = logging.getLogger(__name__)

TRANSLATIONS: Dict[str, Dict[str, str]] = {
    "en": {
        "platform_title": "MysterySeek",
        "platform_subtitle": "AI-Powered Mystery Game Platform",
        "platform_welcome": "Welcome to MysterySeek",
        "platform_description": "Choose a game to play from our collection of AI-powered mystery games.",
        
        "nav_home": "Home",
        "nav_werewolf": "Werewolf",
        "nav_turtle_soup": "Turtle Soup",
        "nav_settings": "Settings",
        
        "sidebar_language": "Language",
        "sidebar_select_game": "Select Game",
        "sidebar_game_status": "Game Status",
        
        "game_werewolf_title": "AutoWerewolf",
        "game_werewolf_subtitle": "AI-Powered Werewolf Game",
        "game_werewolf_description": "Experience the classic social deduction game with AI agents. Watch them play or join the game yourself!",
        
        "game_turtle_soup_title": "Echoes of Deceit",
        "game_turtle_soup_subtitle": "Turtle Soup Puzzle Game",
        "game_turtle_soup_description": "A mysterious lateral thinking puzzle game where you uncover hidden truths through yes/no questions.",
        
        "home_choose_game": "Choose a Game",
        "home_play_now": "Play Now",
        "home_features": "Features",
        "home_ai_agents": "AI Agents",
        "home_multiplayer": "Watch or Play",
        "home_puzzles": "Mystery Puzzles",
        "home_languages": "Multi-language",
        
        "status_connected": "Connected",
        "status_disconnected": "Disconnected",
        "status_running": "Running",
        "status_stopped": "Stopped",
        "status_completed": "Completed",
        "status_error": "Error",
        
        "btn_start": "Start",
        "btn_stop": "Stop",
        "btn_back": "Back",
        "btn_home": "Home",
        "btn_confirm": "Confirm",
        "btn_cancel": "Cancel",
        "btn_continue": "Continue",
        "btn_quit": "Quit",
        
        "loading": "Loading...",
        "error_generic": "An error occurred. Please try again.",
        "close": "Close",
        "yes": "Yes",
        "no": "No",
        
        "werewolf_app_title": "AutoWerewolf",
        "werewolf_watch_mode": "Watch Mode",
        "werewolf_play_mode": "Play Mode",
        "werewolf_watch_desc": "Watch AI agents play",
        "werewolf_play_desc": "Join the game as a player",
        "werewolf_start_game": "Start Game",
        "werewolf_stop_game": "Stop Game",
        "werewolf_game_config": "Game Configuration",
        "werewolf_model_config": "Model Settings",
        "werewolf_backend": "Backend",
        "werewolf_model_name": "Model Name",
        "werewolf_temperature": "Temperature",
        "werewolf_max_tokens": "Max Tokens",
        "werewolf_game_rules": "Game Rules",
        "werewolf_role_set": "Role Set",
        "werewolf_role_set_a": "Set A (Guard)",
        "werewolf_role_set_b": "Set B (Village Idiot)",
        "werewolf_random_seed": "Random Seed (optional)",
        "werewolf_game_language": "Game Language",
        "werewolf_game_language_hint": "Language used for AI agent prompts",
        "werewolf_player_settings": "Player Settings",
        "werewolf_your_seat": "Your Seat",
        "werewolf_your_name": "Your Name",
        "werewolf_day": "Day",
        "werewolf_night": "Night",
        "werewolf_phase": "Phase",
        "werewolf_alive": "Alive",
        "werewolf_dead": "Dead",
        "werewolf_sheriff": "Sheriff",
        "werewolf_players": "Players",
        "werewolf_events": "Events",
        "werewolf_game_over": "Game Over",
        "werewolf_village_wins": "Village Wins!",
        "werewolf_werewolf_wins": "Werewolves Win!",
        "werewolf_waiting": "Waiting...",
        "werewolf_your_turn": "Your Turn",
        "werewolf_submit": "Submit",
        "werewolf_skip": "Skip",
        "werewolf_vote": "Vote",
        "werewolf_speech": "Speech",
        "werewolf_werewolf": "Werewolf",
        "werewolf_villager": "Villager",
        "werewolf_seer": "Seer",
        "werewolf_witch": "Witch",
        "werewolf_hunter": "Hunter",
        "werewolf_guard": "Guard",
        "werewolf_village_idiot": "Village Idiot",
        "werewolf_hidden": "???",
        "werewolf_action_kill": "Kill Target",
        "werewolf_action_check": "Check Target",
        "werewolf_action_save": "Save Target",
        "werewolf_action_poison": "Poison Target",
        "werewolf_action_protect": "Protect Target",
        "werewolf_action_shoot": "Shoot Target",
        "werewolf_use_cure": "Use Cure",
        "werewolf_use_poison": "Use Poison",
        "werewolf_run_for_sheriff": "Run for Sheriff",
        "werewolf_pass_badge": "Pass Badge",
        "werewolf_tear_badge": "Tear Badge",
        "werewolf_last_words": "Last Words",
        "werewolf_connecting": "Connecting...",
        "werewolf_connected": "Connected",
        "werewolf_disconnected": "Disconnected",
        "werewolf_error": "Error",
        "werewolf_api_base": "API Base URL",
        "werewolf_api_key": "API Key",
        "werewolf_ollama_url": "Ollama URL",
        "werewolf_game_log": "Game Progress",
        "werewolf_no_game_running": "No game running",
        "werewolf_select_target": "Select Target",
        "werewolf_enter_speech": "Enter your speech...",
        "werewolf_confirm": "Confirm",
        "werewolf_cancel": "Cancel",
        "werewolf_seat": "Seat",
        "werewolf_role": "Role",
        "werewolf_status": "Status",
        "werewolf_game_not_started": "Game Not Started",
        "werewolf_game_in_progress": "Game In Progress",
        "werewolf_waiting_for_action": "Waiting for action...",
        "werewolf_output_corrector": "Output Corrector",
        "werewolf_enable_corrector": "Enable Corrector",
        "werewolf_corrector_retries": "Max Retries",
        "werewolf_corrector_desc": "Automatically fix malformed model outputs",
        "werewolf_use_separate_model": "Use Separate Model",
        "werewolf_corrector_backend": "Corrector Backend",
        "werewolf_corrector_model": "Corrector Model",
        "werewolf_your_status": "Your Status",
        "werewolf_alignment": "Alignment",
        "werewolf_village": "Village",
        "werewolf_teammates": "Teammates",
        "werewolf_seer_checks": "Seer Checks",
        "werewolf_cure": "Cure",
        "werewolf_poison": "Poison",
        "werewolf_make_decision": "Make Decision",
        "werewolf_enter_response": "Enter Response",
        "werewolf_created": "Created",
        "werewolf_running": "Running",
        "werewolf_completed": "Completed",
        "werewolf_stopped": "Stopped",
        "werewolf_all": "All",
        "werewolf_narration": "Narration",
        "werewolf_good_team_victory": "The village has successfully eliminated all werewolves!",
        "werewolf_evil_team_victory": "The werewolves have taken over the village!",
        "werewolf_can_shoot": "Can Shoot",
        "werewolf_last_protected": "Last Protected",
        "werewolf_attack_target": "Attack Target",
        "werewolf_game_arena": "Game Arena",
        "werewolf_player_info": "Player Info",
        "werewolf_mode": "Mode",
        "werewolf_game_status": "Game Status",
        "werewolf_language": "Language",
        "werewolf_death": "Death",
        "werewolf_clear_events": "Clear Events",
        "werewolf_refresh": "Refresh",
        "werewolf_click_start": "Click 'Start Game' to begin",
        "werewolf_game_running": "Game Running",
        "werewolf_game_completed": "Game Completed",
        "werewolf_game_stopped": "Game Stopped",
        "werewolf_game_error": "Game Error",
        "werewolf_no_events": "No events yet",
        "werewolf_human_player": "You",
        "werewolf_wolf_teammate": "Wolf Teammate",
        "werewolf_event_type_speech": "Speech",
        "werewolf_event_type_vote": "Vote",
        "werewolf_event_type_death": "Death",
        "werewolf_event_type_sheriff": "Sheriff",
        "werewolf_event_type_system": "System",
        "werewolf_waiting_action": "Waiting for your action...",
        "werewolf_select_player": "Select a player",
        "werewolf_no_target": "No target (Skip)",
        "werewolf_confirm_action": "Confirm Action",
        "werewolf_type_your_message": "Type your message...",
        "werewolf_action_submitted": "Action submitted!",
        "werewolf_players_alive": "Players Alive",
        "werewolf_current_phase": "Current Phase",
        "werewolf_day_number": "Day",
        "werewolf_auto_scroll": "Auto-scroll",
        "werewolf_event_filter": "Filter Events",
        "werewolf_revealed": "Revealed",
        "werewolf_teammates_suggestions": "Teammates' Suggestions",
        "werewolf_suggests_kill": "suggests killing",
        "werewolf_config_loaded": "Config loaded from",
        "werewolf_using_defaults": "Using defaults",
        "werewolf_good": "Good",
        "werewolf_evil": "Werewolf",
        "werewolf_check_result_good": "is Good",
        "werewolf_check_result_evil": "is Werewolf",
        "werewolf_has_cure": "Has Cure",
        "werewolf_has_poison": "Has Poison",
        "werewolf_events_appear": "Events will appear here",
        "werewolf_night_phase": "Night",
        "werewolf_day_phase": "Day",
        
        "turtle_app_title": "Echoes of Deceit",
        "turtle_app_subtitle": "Turtle Soup Puzzle Game",
        "turtle_welcome_title": "Welcome to Echoes of Deceit",
        "turtle_welcome_description": "A mysterious lateral thinking puzzle game where you uncover hidden truths through yes/no questions.",
        "turtle_select_puzzle": "Select a Puzzle",
        "turtle_no_puzzles": "No puzzles available. Please initialize the system first.",
        "turtle_puzzle_difficulty": "Difficulty",
        "turtle_puzzle_language": "Language",
        "turtle_puzzle_tags": "Tags",
        "turtle_start_game": "Start Game",
        "turtle_continue_game": "Continue Game",
        "turtle_active_sessions": "Active Sessions",
        "turtle_no_active_sessions": "No active game sessions.",
        "turtle_game_title": "Game Session",
        "turtle_puzzle_statement": "The Puzzle",
        "turtle_your_question": "Your question or hypothesis...",
        "turtle_send": "Send",
        "turtle_hint": "Get Hint",
        "turtle_status": "Status",
        "turtle_quit": "Quit Game",
        "turtle_help": "Help",
        "turtle_turn": "Turn",
        "turtle_hints_used": "Hints Used",
        "turtle_hints_remaining": "Hints Remaining",
        "turtle_game_state": "Game State",
        "turtle_no_session": "No active game session. Please select a puzzle first.",
        "turtle_thinking": "Thinking...",
        "turtle_you": "You",
        "turtle_dm": "DM",
        "turtle_game_over": "Game Over!",
        "turtle_congratulations": "Congratulations! You solved the puzzle!",
        "turtle_session_ended": "The game session has ended.",
        "turtle_back_home": "Back to Home",
        "turtle_commands_title": "Commands",
        "turtle_commands_hint": "/hint - Get a hint",
        "turtle_commands_status": "/status - View game status",
        "turtle_commands_history": "/history - View recent Q&A",
        "turtle_commands_quit": "/quit - End the game",
        "turtle_commands_help": "/help - Show help",
        "turtle_how_to_play": "How to Play",
        "turtle_instructions": """
1. Read the puzzle statement carefully
2. Ask yes/no questions to gather clues
3. When ready, state your hypothesis (start with "I think..." or "My guess is...")
4. Use hints sparingly - they're limited!
""",
        "turtle_agent_run_turn": "Run One Turn",
        "turtle_agent_auto_play": "Auto Play",
        "turtle_agent_delay": "Delay (s)",
        "turtle_agent_thinking": "AI is thinking...",
        "turtle_human_mode": "Human Mode",
        "turtle_agent_mode": "Agent Mode",
        "turtle_agent_next_turn": "Next Turn",
        "turtle_agent_stop": "Stop",
        "turtle_chat_history": "Chat History",
        "turtle_puzzle_story": "Puzzle Story",
        "turtle_input_placeholder": "Type your question here...",
        "turtle_game_over_message": "Game Over!",
        "turtle_completed": "Congratulations! You solved the puzzle!",
        "turtle_failed": "Game Over - Better luck next time!",
        "turtle_ended": "Game Ended",
        "turtle_final_score": "Final Score",
        "turtle_total_turns": "Total Turns",
        "turtle_player_id": "Player ID",
        "turtle_player_id_help": "Enter your player ID to track your progress",
        "turtle_player_agent_mode": "Player Agent Mode",
        "turtle_player_agent_mode_help": "Let AI play as the player (spectator mode)",
        "turtle_state_lobby": "Lobby",
        "turtle_state_in_progress": "In Progress",
        "turtle_state_completed": "Completed",
        "turtle_state_aborted": "Aborted",
        "turtle_error_no_active_session": "No active game session.",
        "turtle_error_missing_puzzle": "Please select a puzzle first.",
        "turtle_error_init_required": "System initialization required. Please run 'python cli.py init' first.",
    },
    
    "zh": {
        "platform_title": "MysterySeek",
        "platform_subtitle": "AI驱动的推理游戏平台",
        "platform_welcome": "欢迎来到 MysterySeek",
        "platform_description": "从我们的AI推理游戏系列中选择一款游戏开始体验。",
        
        "nav_home": "首页",
        "nav_werewolf": "狼人杀",
        "nav_turtle_soup": "海龟汤",
        "nav_settings": "设置",
        
        "sidebar_language": "语言",
        "sidebar_select_game": "选择游戏",
        "sidebar_game_status": "游戏状态",
        
        "game_werewolf_title": "自动狼人杀",
        "game_werewolf_subtitle": "AI驱动的狼人杀游戏",
        "game_werewolf_description": "体验经典的社交推理游戏，由AI代理进行游戏。观看它们对战或亲自加入游戏！",
        
        "game_turtle_soup_title": "谎言回响",
        "game_turtle_soup_subtitle": "海龟汤推理游戏",
        "game_turtle_soup_description": "一款神秘的横向思维推理游戏，通过是/否问题揭开隐藏的真相。",
        
        "home_choose_game": "选择游戏",
        "home_play_now": "开始游戏",
        "home_features": "特色功能",
        "home_ai_agents": "AI代理",
        "home_multiplayer": "观看或参与",
        "home_puzzles": "推理谜题",
        "home_languages": "多语言支持",
        
        "status_connected": "已连接",
        "status_disconnected": "已断开",
        "status_running": "运行中",
        "status_stopped": "已停止",
        "status_completed": "已完成",
        "status_error": "错误",
        
        "btn_start": "开始",
        "btn_stop": "停止",
        "btn_back": "返回",
        "btn_home": "首页",
        "btn_confirm": "确认",
        "btn_cancel": "取消",
        "btn_continue": "继续",
        "btn_quit": "退出",
        
        "loading": "加载中...",
        "error_generic": "发生错误，请重试。",
        "close": "关闭",
        "yes": "是",
        "no": "否",
        
        "werewolf_app_title": "自动狼人杀",
        "werewolf_watch_mode": "观看模式",
        "werewolf_play_mode": "游戏模式",
        "werewolf_watch_desc": "观看AI对局",
        "werewolf_play_desc": "作为玩家参与游戏",
        "werewolf_start_game": "开始游戏",
        "werewolf_stop_game": "停止游戏",
        "werewolf_game_config": "游戏配置",
        "werewolf_model_config": "模型设置",
        "werewolf_backend": "后端",
        "werewolf_model_name": "模型名称",
        "werewolf_temperature": "温度",
        "werewolf_max_tokens": "最大Token数",
        "werewolf_game_rules": "游戏规则",
        "werewolf_role_set": "角色集",
        "werewolf_role_set_a": "角色集A (守卫)",
        "werewolf_role_set_b": "角色集B (白痴)",
        "werewolf_random_seed": "随机种子（可选）",
        "werewolf_game_language": "游戏语言",
        "werewolf_game_language_hint": "用于AI代理提示词的语言",
        "werewolf_player_settings": "玩家设置",
        "werewolf_your_seat": "你的座位",
        "werewolf_your_name": "你的名字",
        "werewolf_day": "天数",
        "werewolf_night": "夜晚",
        "werewolf_phase": "阶段",
        "werewolf_alive": "存活",
        "werewolf_dead": "死亡",
        "werewolf_sheriff": "警长",
        "werewolf_players": "玩家",
        "werewolf_events": "事件",
        "werewolf_game_over": "游戏结束",
        "werewolf_village_wins": "好人阵营胜利！",
        "werewolf_werewolf_wins": "狼人阵营胜利！",
        "werewolf_waiting": "等待中...",
        "werewolf_your_turn": "轮到你了",
        "werewolf_submit": "提交",
        "werewolf_skip": "跳过",
        "werewolf_vote": "投票",
        "werewolf_speech": "发言",
        "werewolf_werewolf": "狼人",
        "werewolf_villager": "村民",
        "werewolf_seer": "预言家",
        "werewolf_witch": "女巫",
        "werewolf_hunter": "猎人",
        "werewolf_guard": "守卫",
        "werewolf_village_idiot": "白痴",
        "werewolf_hidden": "???",
        "werewolf_action_kill": "击杀目标",
        "werewolf_action_check": "查验目标",
        "werewolf_action_save": "救治目标",
        "werewolf_action_poison": "毒杀目标",
        "werewolf_action_protect": "保护目标",
        "werewolf_action_shoot": "射击目标",
        "werewolf_use_cure": "使用解药",
        "werewolf_use_poison": "使用毒药",
        "werewolf_run_for_sheriff": "竞选警长",
        "werewolf_pass_badge": "传递警徽",
        "werewolf_tear_badge": "撕毁警徽",
        "werewolf_last_words": "遗言",
        "werewolf_connecting": "连接中...",
        "werewolf_connected": "已连接",
        "werewolf_disconnected": "已断开",
        "werewolf_error": "错误",
        "werewolf_api_base": "API基础URL",
        "werewolf_api_key": "API密钥",
        "werewolf_ollama_url": "Ollama地址",
        "werewolf_game_log": "游戏进程",
        "werewolf_no_game_running": "没有正在进行的游戏",
        "werewolf_select_target": "选择目标",
        "werewolf_enter_speech": "输入你的发言...",
        "werewolf_confirm": "确认",
        "werewolf_cancel": "取消",
        "werewolf_seat": "座位",
        "werewolf_role": "角色",
        "werewolf_status": "状态",
        "werewolf_game_not_started": "游戏未开始",
        "werewolf_game_in_progress": "游戏进行中",
        "werewolf_waiting_for_action": "等待操作...",
        "werewolf_output_corrector": "输出校正器",
        "werewolf_enable_corrector": "启用校正器",
        "werewolf_corrector_retries": "最大重试次数",
        "werewolf_corrector_desc": "自动修复格式错误的模型输出",
        "werewolf_use_separate_model": "使用独立模型",
        "werewolf_corrector_backend": "校正器后端",
        "werewolf_corrector_model": "校正器模型",
        "werewolf_your_status": "你的状态",
        "werewolf_alignment": "阵营",
        "werewolf_village": "好人阵营",
        "werewolf_teammates": "狼队友",
        "werewolf_seer_checks": "查验结果",
        "werewolf_cure": "解药",
        "werewolf_poison": "毒药",
        "werewolf_make_decision": "做出决定",
        "werewolf_enter_response": "输入回复",
        "werewolf_created": "已创建",
        "werewolf_running": "进行中",
        "werewolf_completed": "已完成",
        "werewolf_stopped": "已停止",
        "werewolf_all": "全部",
        "werewolf_narration": "旁白",
        "werewolf_good_team_victory": "村民成功消灭了所有狼人！",
        "werewolf_evil_team_victory": "狼人占领了村庄！",
        "werewolf_can_shoot": "可以开枪",
        "werewolf_last_protected": "上次守护的人",
        "werewolf_attack_target": "被袭击的目标",
        "werewolf_game_arena": "游戏场",
        "werewolf_player_info": "玩家信息",
        "werewolf_mode": "模式",
        "werewolf_game_status": "游戏状态",
        "werewolf_language": "语言",
        "werewolf_death": "死亡",
        "werewolf_clear_events": "清除事件",
        "werewolf_refresh": "刷新",
        "werewolf_click_start": "点击「开始游戏」开始",
        "werewolf_game_running": "游戏进行中",
        "werewolf_game_completed": "游戏已完成",
        "werewolf_game_stopped": "游戏已停止",
        "werewolf_game_error": "游戏错误",
        "werewolf_no_events": "暂无事件",
        "werewolf_human_player": "你",
        "werewolf_wolf_teammate": "狼队友",
        "werewolf_event_type_speech": "发言",
        "werewolf_event_type_vote": "投票",
        "werewolf_event_type_death": "死亡",
        "werewolf_event_type_sheriff": "警长",
        "werewolf_event_type_system": "系统",
        "werewolf_waiting_action": "等待你的操作...",
        "werewolf_select_player": "选择一名玩家",
        "werewolf_no_target": "不选择目标（跳过）",
        "werewolf_confirm_action": "确认操作",
        "werewolf_type_your_message": "输入你的消息...",
        "werewolf_action_submitted": "操作已提交！",
        "werewolf_players_alive": "存活玩家",
        "werewolf_current_phase": "当前阶段",
        "werewolf_day_number": "第几天",
        "werewolf_auto_scroll": "自动滚动",
        "werewolf_event_filter": "筛选事件",
        "werewolf_revealed": "已暴露",
        "werewolf_teammates_suggestions": "队友建议",
        "werewolf_suggests_kill": "建议击杀",
        "werewolf_config_loaded": "配置加载自",
        "werewolf_using_defaults": "使用默认配置",
        "werewolf_good": "好人",
        "werewolf_evil": "狼人",
        "werewolf_check_result_good": "是好人",
        "werewolf_check_result_evil": "是狼人",
        "werewolf_has_cure": "有解药",
        "werewolf_has_poison": "有毒药",
        "werewolf_events_appear": "事件将在此显示",
        "werewolf_night_phase": "夜晚",
        "werewolf_day_phase": "白天",
        
        "turtle_app_title": "谎言回响",
        "turtle_app_subtitle": "海龟汤推理游戏",
        "turtle_welcome_title": "欢迎来到谎言回响",
        "turtle_welcome_description": "一款神秘的横向思维推理游戏，通过是/否问题揭开隐藏的真相。",
        "turtle_select_puzzle": "选择谜题",
        "turtle_no_puzzles": "暂无可用谜题，请先初始化系统。",
        "turtle_puzzle_difficulty": "难度",
        "turtle_puzzle_language": "语言",
        "turtle_puzzle_tags": "标签",
        "turtle_start_game": "开始游戏",
        "turtle_continue_game": "继续游戏",
        "turtle_active_sessions": "进行中的游戏",
        "turtle_no_active_sessions": "暂无进行中的游戏。",
        "turtle_game_title": "游戏进行中",
        "turtle_puzzle_statement": "谜题描述",
        "turtle_your_question": "输入您的问题或猜测...",
        "turtle_send": "发送",
        "turtle_hint": "获取提示",
        "turtle_status": "状态",
        "turtle_quit": "退出游戏",
        "turtle_help": "帮助",
        "turtle_turn": "回合",
        "turtle_hints_used": "已用提示",
        "turtle_hints_remaining": "剩余提示",
        "turtle_game_state": "游戏状态",
        "turtle_no_session": "没有活跃的游戏会话，请先选择一个谜题。",
        "turtle_thinking": "思考中...",
        "turtle_you": "你",
        "turtle_dm": "主持人",
        "turtle_game_over": "游戏结束！",
        "turtle_congratulations": "恭喜！你解开了谜题！",
        "turtle_session_ended": "游戏会话已结束。",
        "turtle_back_home": "返回首页",
        "turtle_commands_title": "命令",
        "turtle_commands_hint": "/hint - 获取提示",
        "turtle_commands_status": "/status - 查看游戏状态",
        "turtle_commands_history": "/history - 查看问答历史",
        "turtle_commands_quit": "/quit - 结束游戏",
        "turtle_commands_help": "/help - 显示帮助",
        "turtle_how_to_play": "游戏玩法",
        "turtle_instructions": """
1. 仔细阅读谜题描述
2. 通过是/否问题收集线索
3. 准备好后，提出你的假设（以"我认为..."或"我猜..."开头）
4. 谨慎使用提示 - 数量有限！
""",
        "turtle_agent_run_turn": "执行一回合",
        "turtle_agent_auto_play": "自动游玩",
        "turtle_agent_delay": "延迟 (秒)",
        "turtle_agent_thinking": "AI正在思考...",
        "turtle_human_mode": "人类玩家模式",
        "turtle_agent_mode": "AI玩家模式",
        "turtle_agent_next_turn": "下一回合",
        "turtle_agent_stop": "停止",
        "turtle_chat_history": "对话历史",
        "turtle_puzzle_story": "谜题故事",
        "turtle_input_placeholder": "在此输入您的问题...",
        "turtle_game_over_message": "游戏结束！",
        "turtle_completed": "恭喜！你解开了谜题！",
        "turtle_failed": "游戏结束 - 下次再接再厉！",
        "turtle_ended": "游戏已结束",
        "turtle_final_score": "最终得分",
        "turtle_total_turns": "总回合数",
        "turtle_player_id": "玩家ID",
        "turtle_player_id_help": "输入您的玩家ID以追踪游戏进度",
        "turtle_player_agent_mode": "AI玩家模式",
        "turtle_player_agent_mode_help": "让AI作为玩家进行游戏（观战模式）",
        "turtle_state_lobby": "等待中",
        "turtle_state_in_progress": "进行中",
        "turtle_state_completed": "已完成",
        "turtle_state_aborted": "已中止",
        "turtle_error_no_active_session": "没有活跃的游戏会话。",
        "turtle_error_missing_puzzle": "请先选择一个谜题。",
        "turtle_error_init_required": "需要初始化系统，请先运行 'python cli.py init'。",
    }
}


_current_language = "en"


class I18n:
    def __init__(self, language: str = "en"):
        self._language = language if language in TRANSLATIONS else "en"
    
    @property
    def language(self) -> str:
        return self._language
    
    @language.setter
    def language(self, value: str) -> None:
        if value in TRANSLATIONS:
            self._language = value
    
    def get(self, key: str, **kwargs: Any) -> str:
        translation = TRANSLATIONS.get(self._language, TRANSLATIONS["en"])
        text = translation.get(key, TRANSLATIONS["en"].get(key, key))
        if kwargs:
            try:
                text = text.format(**kwargs)
            except KeyError:
                pass
        return text
    
    def __call__(self, key: str, **kwargs: Any) -> str:
        return self.get(key, **kwargs)


def t(key: str, **kwargs: Any) -> str:
    global _current_language
    translation = TRANSLATIONS.get(_current_language, TRANSLATIONS["en"])
    text = translation.get(key, TRANSLATIONS["en"].get(key, key))
    if kwargs:
        try:
            text = text.format(**kwargs)
        except KeyError:
            pass
    return text


def set_language(language: str) -> None:
    global _current_language
    if language in TRANSLATIONS:
        _current_language = language


def get_language() -> str:
    return _current_language


def get_available_languages() -> Dict[str, str]:
    return {
        "en": "English",
        "zh": "中文",
    }
